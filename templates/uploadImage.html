<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Flask上传图片演示</title>

    <script>
        function showImg(file) {
            var reader = new FileReader();
            reader.onload = function (evt){
                document.getElementById('myImg').src = evt.target.result;
            }
            reader.readAsDataURL(file.files[0])
        }

    </script>
  <!-- slider stylesheet -->
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.1.3/assets/owl.carousel.min.css" />

  <!-- bootstrap core css -->
  <link rel="stylesheet" type="text/css" href="../static/css/bootstrap.css" />

  <!-- fonts style -->
  <link href="https://fonts.googleapis.com/css?family=Baloo+Chettan|Poppins:400,600,700&display=swap" rel="stylesheet">
  <!-- Custom styles for this template -->
  <link href="../static/css/style.css" rel="stylesheet" />
  <!-- responsive style -->
  <link href="../static/css/responsive.css" rel="stylesheet" />
  <script type="text/javascript" src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>
  <script type="text/javascript" src="//cdn.bootcss.com/socket.io/1.5.1/socket.io.min.js"></script>
</head>
<body>
  <div class="hero_area">

    <!-- slider section -->
    <section class=" slider_section position-relative">
      <div class="design-box">
        <img src="../static/images/design-1.png" alt="">
      </div>
      <div class="container">

        <div class="title_h1">
          <h1>上传单张图片</h1>
          <p>
            请上传jpg jpeg png等图像格式的含反光图片作为待处理目标
          </p>
        </div>

      <div class="item_container_upload">
        <div class="box">
          <div class="price">
          </div>
          <div class="img-box">
            <img src="../static/images/upload.jpg" alt="" id="myImg">
          </div>
        </div>
      </div>

    <div class="content_image">
        <form action="/upload" enctype='multipart/form-data' method='POST'>
            <input id="default-btn" type="file" name="file" onchange="showImg(this)" hidden>
            <input type="submit" value="上传" class="button-new">
        </form>
        <div class="btn">
            <button onclick="active()" id="custom-btn">选择图片</button>
        </div>
        <div class="file-name">未选择</div>

    </div>
          <script>
        const defaultBtn = document.querySelector('#default-btn');
        const customBtn = document.querySelector('#custom-btn');
        const fileName = document.querySelector('.file-name');
        let regExp = /[0-9a-zA-Z\^\&\'\@\{\}\[\]\,\$\=\!\-\#\(\)\.\%\+\~\_ ]+$/;
        function active(){
            defaultBtn.click();
        }
        defaultBtn.addEventListener("change", function(){
            if(this.value){
                let nameValue = this.value.match(regExp);
                fileName.style.display = "block";
                fileName.textContent = nameValue;
            }else{
                fileName.style.display = "block";
                fileName.textContent = "未选择"
            }
        });
    </script>
      </div>
    </section>
    <!-- end slider section -->
  </div>
  <script type="text/javascript" src="../static/js/jquery-3.4.1.min.js"></script>
  <script type="text/javascript" src="../static/js/bootstrap.js"></script>
  <script type="text/javascript" src="../static/js/custom.js"></script>

</body>
</html>